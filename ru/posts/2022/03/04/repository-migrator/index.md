# –ü–µ—Ä–µ–Ω–æ—Å–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å BitBucket –Ω–∞ GitHub

*** 

–í –ø—Ä–æ—à–ª–æ–º –≥–æ–¥—É —è –ø–µ—Ä–µ–µ–∑–∂–∞–ª —Å –æ–¥–Ω–æ–π VCS –Ω–∞ –¥—Ä—É–≥—É—é. –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é, –∫–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å BitBucket –Ω–∞ GitHub, –∏ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.

***

–î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è BitBucket –±—ã–ª –º–æ–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π VCS: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Mercurial –∑–∞–∫—Ä—ã–≤–∞–ª–∏ –≤—Å–µ —Ä–∞–±–æ—á–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏.
–°–æ –≤—Ä–µ–º–µ–Ω–µ–º GitHub'–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –≤—Å–µ –±–æ–ª—å—à–µ, –∞ –ø–æ—Ç–æ–º —Ç—É–¥–∞ –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ–¥—ä–µ—Ö–∞–ª–∏, –∏ CI/CD –∑–∞–≤–µ–∑–ª–∏ ‚Äî —Å—Ç–∞–ª–æ –≤–æ–æ–±—â–µ —Ö–æ—Ä–æ—à–æ, –Ω–∞–¥–æ –±—ã–ª–æ –ø–µ—Ä–µ–µ–∑–∂–∞—Ç—å.
–ù–∞ BitBucket —É –º–µ–Ω—è –∫ —Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –æ–∫–æ–ª–æ 40 –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–∑–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏, —Ä—É–∫–∞–º–∏ –∏—Ö –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã, –Ω–æ –¥–æ–ª–≥–æ.

–ù–∞–ø–∏—Å–∞–ª —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞, –∫–æ—Ç–æ—Ä–∞—è —á–µ—Ä–µ–∑ API –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö –≤ –æ–¥–Ω–æ–π VCS, —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –¥—Ä—É–≥–æ–π VSC –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ.

[üëâ **torunar/repository-migrator**](https://github.com/torunar/repository-migrator)

–í–Ω—É—Ç—Ä–∏ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ —Å–∞–º—É—é —á–∞—Å—Ç–æ —É–ø–æ–º–∏–Ω–∞–µ–º—É—é –æ–ø—Ü–∏—é –∫–æ–º–∞–Ω–¥—ã `git clone` ‚Äî `--mirror`.
–ü—Ä–∏ –µ–µ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±—É–¥—É—Ç —Å–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –≤–µ—Ç–∫–∏ –∏ —Ç–µ–≥–∏ ‚Äî –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏–∑ VCS.

## –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ç–∏–ª–∏—Ç—É

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.
* –°–æ–∑–¥–∞–π—Ç–µ app password –¥–ª—è BitBucket —Å –ø—Ä–∞–≤–∞–º–∏ `Repositories: Read`, `Repositories: Write` –∏ `Repositories: Admin`: [bitbucket.org/account/settings/app-passwords/new](https://bitbucket.org/account/settings/app-passwords/new).
* –°–æ–∑–¥–∞–π—Ç–µ personal token –¥–ª—è GitHub —Å –ø—Ä–∞–≤–∞–º–∏ `repo`: [github.com/settings/tokens/new](https://github.com/settings/tokens/new).
* –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

        $ git clone git@github.com:torunar/repository-migrator.git
    
* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    
        $ cd repository-migrator
        $ pip3 install -r requirements.txt

## –ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å BitBucket –Ω–∞ GitHub
    
    $ python3 repository-migrator \
        --input=bitbucket \
        --output=github \
        --bitbucket-login='–ù–∏–∫ –Ω–∞ BitBucket' \ 
        --bitbucket-password='App password –¥–ª—è BitBucket' \
        --github-login='–ù–∏–∫ –Ω–∞ GitHub' \
        --github-password='Personal access token –¥–ª—è GitHub'

## –ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å GitHub –Ω–∞ BitBucket

    $ python3 repository-migrator \
        --input=github \
        --output=bitbucket \
        --bitbucket-login='–ù–∏–∫ –Ω–∞ BitBucket' \ 
        --bitbucket-password='App password –¥–ª—è BitBucket' \
        --github-login='–ù–∏–∫ –Ω–∞ GitHub' \
        --github-password='Personal access token –¥–ª—è GitHub'

## –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Å GitHub

    $ python3 repository-migrator \
        --input=github \
        --output=local \
        --github-login='–ù–∏–∫ –Ω–∞ GitHub' \
        --github-password='Personal access token –¥–ª—è GitHub' \
        --storage-path='–ü–∞–ø–∫–∞ –¥–ª—è –±—ç–∫–∞–ø–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)'

## –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Å BitBucket

    $ python3 repository-migrator \
        --input=bitbucket \
        --output=local \
        --bitbucket-login='–ù–∏–∫ –Ω–∞ BitBucket' \ 
        --bitbucket-password='App password –¥–ª—è BitBucket' \
        --storage-path='–ü–∞–ø–∫–∞ –¥–ª—è –±—ç–∫–∞–ø–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ)'

## –ö–∞–∫ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–ø–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –±—ç–∫–∞–ø–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏—Ö –Ω—É–∂–Ω–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ –≤—ã–∫–∞—á–∏–≤–∞—Ç—å –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É:

    $ git remote update

–ï—Å–ª–∏ –≤—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ `/directory/with/backup`, –∏—Ö –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–∫:

    $ for REPO_DIR in $(find /directory/with/backups -d 1 -type d); do 
        git -C $REPO_DIR remote update
    done
